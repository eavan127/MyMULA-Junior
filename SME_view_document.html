<!DOCTYPE html>
<html class="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>SME Registration Summary (Pending) - MyMULA Junior</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0459ae",
                        "background-light": "#f5f7f8",
                        "background-dark": "#0f1923",
                    },
                    fontFamily: {
                        "display": ["Public Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }
    </style>
    <style>
        body {
            min-height: max(884px, 100dvh);
        }
    </style>
    <style>
        body {
            min-height: max(884px, 100dvh);
        }
    </style>
</head>

<body class="font-display bg-background-light dark:bg-background-dark">
    <div class="relative flex min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <header
            class="sticky top-0 z-10 flex h-16 shrink-0 items-center justify-between border-b border-b-slate-200 bg-white/80 px-4 backdrop-blur-sm dark:border-b-slate-800 dark:bg-background-dark/80">
            <button onclick="handleBackNavigation()"
                class="flex size-10 shrink-0 items-center justify-center text-[#111418] dark:text-white">
                <span class="material-symbols-outlined text-2xl notranslate">arrow_back</span>
            </button>
            <h1
                class="flex-1 text-center text-lg font-bold leading-tight tracking-[-0.015em] text-[#111418] dark:text-white">
                Registration Details</h1>
            <div class="size-10 shrink-0"></div>
        </header>
        <main class="flex-1 pb-32">
            <div class="p-4">
                <div
                    class="flex flex-col items-stretch justify-start rounded-xl bg-white shadow-[0_4px_12px_rgba(0,0,0,0.05)] dark:bg-slate-900">
                    <div class="flex flex-col items-stretch justify-center gap-2 p-5">
                        <div class="flex items-start justify-between gap-3">
                            <p
                                class="text-lg font-bold leading-tight tracking-[-0.015em] text-[#111418] dark:text-white">
                                SME Registration Summary</p>
                            <div id="doc-top-status-badge"
                                class="shrink-0 rounded-full bg-amber-100 px-3 py-1 text-xs font-medium text-amber-700 dark:bg-amber-900/50 dark:text-amber-300">
                                Pending</div>
                        </div>
                        <p class="text-sm font-normal leading-normal text-[#5f758c] dark:text-slate-400">
                            A registration for your SME business under SSM. <span
                                class="text-slate-400 dark:text-slate-500"></span>
                        </p>
                        <p class="text-sm font-normal leading-normal text-[#5f758c] dark:text-slate-400">Reference ID:
                            MYMULA-SME-09250</p>
                    </div>
                    <div class="grid grid-cols-1 px-5">
                        <div
                            class="grid grid-cols-[auto_1fr] items-center gap-x-4 border-t border-t-[#dbe0e6] py-4 dark:border-t-slate-800">
                            <span class="material-symbols-outlined text-xl text-primary">person</span>
                            <div>
                                <p class="text-sm font-bold leading-normal text-[#111418] dark:text-slate-200">Ali</p>
                                <p class="text-xs text-[#5f758c] dark:text-slate-400">Applicant (Pemohon): Child Name
                                    (Nama Anak)</p>
                            </div>
                        </div>
                        <div
                            class="grid grid-cols-[auto_1fr] items-center gap-x-4 border-t border-t-[#dbe0e6] py-4 dark:border-t-slate-800">
                            <span class="material-symbols-outlined text-xl text-primary">storefront</span>
                            <div>
                                <p class="text-sm font-bold leading-normal text-[#111418] dark:text-slate-200">Ali
                                    Gaming Store</p>
                                <p class="text-xs text-[#5f758c] dark:text-slate-400">Business Name (Nama Perniagaan)
                                </p>
                            </div>
                        </div>
                        <div
                            class="grid grid-cols-[auto_1fr] items-center gap-x-4 border-t border-t-[#dbe0e6] py-4 dark:border-t-slate-800">
                            <span class="material-symbols-outlined text-xl text-primary">business_center</span>
                            <div>
                                <p class="text-sm font-bold leading-normal text-[#111418] dark:text-slate-200">Sole
                                    Proprietorship</p>
                                <p class="text-xs text-[#5f758c] dark:text-slate-400">Business Type (Jenis Perniagaan):
                                    Perniagaan Tunggal</p>
                            </div>
                        </div>
                        <div
                            class="grid grid-cols-[auto_1fr] items-center gap-x-4 border-t border-t-[#dbe0e6] py-4 dark:border-t-slate-800">
                            <span class="material-symbols-outlined text-xl text-primary">category</span>
                            <div>
                                <p class="text-sm font-bold leading-normal text-[#111418] dark:text-slate-200">Retail /
                                    Gaming Accessories</p>
                                <p class="text-xs text-[#5f758c] dark:text-slate-400">Industry (Industri): Runcit /
                                    Aksesori Permainan</p>
                            </div>
                        </div>
                        <div
                            class="grid grid-cols-[auto_1fr] items-center gap-x-4 border-t border-t-[#dbe0e6] py-4 dark:border-t-slate-800">
                            <span class="material-symbols-outlined text-xl text-primary">payments</span>
                            <div>
                                <p class="text-sm font-bold leading-normal text-[#111418] dark:text-slate-200">RM30.00
                                </p>
                                <p class="text-xs text-[#5f758c] dark:text-slate-400">Amount (Jumlah): Registration Fee
                                    (Yuran Pendaftaran)</p>
                            </div>
                        </div>
                    </div>
                    <div class="border-t border-t-[#dbe0e6] px-5 py-2 dark:border-t-slate-800">
                        <div class="grid grid-cols-[1fr_auto] items-center py-2">
                            <p class="text-xs font-bold text-[#5f758c] dark:text-slate-400">Request Initiated
                                <br /><span class="font-normal text-slate-400 dark:text-slate-500">Permintaan
                                    Dimulakan</span>
                            </p>
                            <p id="doc-date-initiated" class="text-xs font-medium text-[#111418] dark:text-slate-300">--
                            </p>
                        </div>
                        <div class="grid grid-cols-[1fr_auto] items-center py-2">
                            <p class="text-xs font-bold text-[#5f758c] dark:text-slate-400">Guardian Approval
                                <br /><span class="font-normal text-slate-400 dark:text-slate-500">Kelulusan
                                    Penjaga</span>
                            </p>
                            <p id="doc-date-approved" class="text-xs font-medium text-[#111418] dark:text-slate-300">
                                Pending</p>
                        </div>
                        <div class="grid grid-cols-[1fr_auto] items-center py-2">
                            <p class="text-xs font-bold text-[#5f758c] dark:text-slate-400">SSM Name Verified
                                <br /><span class="font-normal text-slate-400 dark:text-slate-500">Pengesahan Nama
                                    SSM</span>
                            </p>
                            <p id="doc-date-verified" class="text-xs font-medium text-[#111418] dark:text-slate-300">
                                Pending</p>
                        </div>
                        <div class="grid grid-cols-[1fr_auto] items-center py-2">
                            <p class="text-xs font-bold text-[#5f758c] dark:text-slate-400">Registration Completed
                                <br /><span class="font-normal text-slate-400 dark:text-slate-500">Pendaftaran
                                    Selesai</span>
                            </p>
                            <div id="doc-status-badge"
                                class="rounded-full bg-slate-200 px-3 py-1 text-xs font-medium text-slate-600 dark:bg-slate-700 dark:text-slate-300">
                                Pending</div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="px-4 py-2">
                <div class="flex items-center gap-3 rounded-lg bg-slate-100 p-3 dark:bg-slate-800">
                    <span class="material-symbols-outlined text-xl text-primary">pending_actions</span>
                    <p class="flex-1 text-xs leading-snug text-[#5f758c] dark:text-slate-400">PDF Registration Document
                        will be available upon approval. <span class="text-slate-400 dark:text-slate-500">Dokumen
                            pendaftaran PDF akan tersedia selepas kelulusan.</span></p>
                </div>
            </div>
        </main>
        <footer
            class="fixed bottom-0 left-0 z-10 w-full border-t border-t-slate-200 bg-white/80 p-4 backdrop-blur-sm dark:border-t-slate-800 dark:bg-background-dark/80">
            <div class="flex flex-col gap-2">
                <button onclick="handleBackNavigation()"
                    class="flex h-12 w-full items-center justify-center rounded-full bg-primary text-base font-bold text-white">Back
                    to Home</button>
            </div>
        </footer>
    </div>

    <script>
        function handleBackNavigation() {
            const urlParams = new URLSearchParams(window.location.search);
            const source = urlParams.get('source');
            if (source === 'adult_home') {
                window.location.href = 'adult_home.html';
            } else if (source === 'adult_requests') {
                window.location.href = 'adult_requests.html';
            } else {
                window.location.href = 'mainpage_home.html';
            }
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            updateDocumentTimings();
            setInterval(updateDocumentTimings, 2000); // Poll for changes
        });

        function updateDocumentTimings() {
            // Check localStorage first for cross-tab updates
            const isApproved = localStorage.getItem('sme_guardian_approved') === 'true' || sessionStorage.getItem('sme_guardian_approved') === 'true';

            // Also check child_requests for rejected status
            const requests = JSON.parse(localStorage.getItem('child_requests') || sessionStorage.getItem('child_requests') || '[]');
            const smeRequest = requests.find(r => r.type === 'sme' && r.status !== 'deleted');
            const isRejected = smeRequest && smeRequest.status === 'rejected';

            const now = new Date();
            const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

            // 1. Request Initiated - Assume today/recent for demo purposes
            const initiatedEl = document.getElementById('doc-date-initiated');
            // Store initiation time to keep it consistent per session
            let initTime = sessionStorage.getItem('sme_init_time');
            if (!initTime) {
                initTime = new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
                sessionStorage.setItem('sme_init_time', initTime);
            }
            if (initiatedEl) initiatedEl.textContent = initTime;

            // 2. Guardian Approval
            const approvedEl = document.getElementById('doc-date-approved');
            if (approvedEl) {
                if (isRejected) {
                    approvedEl.textContent = "Rejected by Guardian";
                    approvedEl.className = "text-xs font-bold text-red-600 dark:text-red-400";
                    sessionStorage.removeItem('sme_approve_time');
                } else if (isApproved) {
                    // In a real app, we'd store the approval timestamp. For now, show "Approved" or a mock time
                    // Let's use a stored time or "Just now" if recently approved
                    let approveTime = sessionStorage.getItem('sme_approve_time');
                    if (!approveTime) {
                        approveTime = new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
                        sessionStorage.setItem('sme_approve_time', approveTime);
                    }
                    approvedEl.textContent = approveTime;
                    approvedEl.className = "text-xs font-bold text-green-600 dark:text-green-400";
                } else {
                    approvedEl.textContent = "Pending Guardian Action";
                    approvedEl.className = "text-xs font-medium text-orange-500 dark:text-orange-400";
                    sessionStorage.removeItem('sme_approve_time'); // Reset if un-approved (e.g. debug)
                }
            }

            // 3. SSM Verified
            const verifiedEl = document.getElementById('doc-date-verified');
            if (verifiedEl) {
                if (isApproved) {
                    verifiedEl.textContent = "Processing...";
                    verifiedEl.className = "text-xs font-medium text-blue-500 dark:text-blue-400";
                } else {
                    verifiedEl.textContent = "Pending";
                    verifiedEl.className = "text-xs font-medium text-slate-400";
                }
            }

            // 4. Registration Status (Bottom List)
            const statusBadge = document.getElementById('doc-status-badge');
            if (statusBadge) {
                if (isRejected) {
                    statusBadge.textContent = "Rejected";
                    statusBadge.className = "rounded-full bg-red-100 px-3 py-1 text-xs font-medium text-red-700 dark:bg-red-900/50 dark:text-red-300";
                } else if (isApproved) {
                    statusBadge.textContent = "In Progress";
                    statusBadge.className = "rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700 dark:bg-blue-900/50 dark:text-blue-300";
                } else {
                    statusBadge.textContent = "Pending";
                    statusBadge.className = "rounded-full bg-slate-200 px-3 py-1 text-xs font-medium text-slate-600 dark:bg-slate-700 dark:text-slate-300";
                }
            }

            // 5. Top Status Badge
            const topBadge = document.getElementById('doc-top-status-badge');
            if (topBadge) {
                if (isRejected) {
                    topBadge.textContent = "Guardian Rejected";
                    topBadge.className = "shrink-0 rounded-full bg-red-100 px-3 py-1 text-xs font-medium text-red-700 dark:bg-red-900/50 dark:text-red-300";
                } else if (isApproved) {
                    topBadge.textContent = "Guardian Approved";
                    topBadge.className = "shrink-0 rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700 dark:bg-green-900/50 dark:text-green-300";
                } else {
                    topBadge.textContent = "Awaiting Guardian";
                    topBadge.className = "shrink-0 rounded-full bg-amber-100 px-3 py-1 text-xs font-medium text-amber-700 dark:bg-amber-900/50 dark:text-amber-300";
                }
            }
        }
    </script>
</body>

</html>